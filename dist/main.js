(()=>{"use strict";const e=config.API_KEY,t={units:"us",address:"",days:[]};async function n(e){console.log(e);let t=[];for(let n=0;n<5;n++){let o={location:e.address,date:e.days[n].datetime,low:e.days[n].tempmin,high:e.days[n].tempmax,hourly:e.days[n].hours,condition:e.days[n].conditions,precip:e.days[n].precipprob,icon:e.days[n].icon};t.push(o)}return t}async function o(){let o=document.getElementById("card-holder"),s="",a="";for(o.hasChildNodes()?(s=document.getElementById("locationInput").value,a=t.units):(s="dallas",a="us"),t.days.length>0&&(t.days=[]),t.days=await async function(o,s){console.log(o),console.log(s);try{const a=await fetch(`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${o}/next7days?unitGroup=${s}&include=days,hours&key=${e}&contentType=json`,{mode:"cors"}),i=await a.json();let c=await n(i);return t.address=i.resolvedAddress,document.getElementById("locationInput").value="",c}catch{alert("No Location Found, Try Again"),document.getElementById("locationInput").value=""}}(s,a);o.firstChild;)o.removeChild(o.firstChild);let i=document.getElementById("location");i.textContent="Showing Weather for: "+t.address;let c=document.getElementById("switch-units");"us"==t.units?(i.innerText+="(°F)",c.innerText="Switch to °C"):(i.innerText+="(°C)",c.innerText="Switch to °F"),t.days.forEach((e=>{let t=document.createElement("div");t.className="card";let n=function(e){let t=e.split("-");return["January","February","March","April","May","June","July","August","September","October","November","December"][t[1]-1]+" "+parseInt(t[2],10)}(e.date),s=document.createElement("div");s.className="date",s.innerText=n,t.appendChild(s);let a=document.createElement("div");a.className="icon";let i=document.createElement("img");t.appendChild(a),a.appendChild(i),i.src="../icons/"+e.icon+".svg";let c=document.createElement("div");c.className="temp",c.textContent="High: "+Math.round(e.high)+"° Low: "+Math.round(e.low)+"°",t.appendChild(c);let d=document.createElement("div");d.innerText=e.condition,d.className="condition",t.appendChild(d);let l=document.createElement("div");l.innerText="Precipitation: "+Math.round(e.precip/10)+"%",l.className="precip",t.appendChild(l),o.appendChild(t)})),document.getElementById("container").classList.add(t.days[0].icon);let d=document.getElementsByClassName("card");console.log(d);let l=d[0].getElementsByClassName("temp");console.log(l[0].innerText)}async function s(){"us"==t.units?t.units="metric":t.units="us",console.log(document.getElementById("switch-units").innerText),t.days=await async function(){let o=t.address;console.log(o);let s=t.units;try{const t=await fetch(`https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/${o}/next7days?unitGroup=${s}&include=days,hours&key=${e}&contentType=json`,{mode:"cors"}),a=await t.json();let i=await n(a);return document.getElementById("locationInput").value="",i}catch{alert("No Location Found, Try Again"),console.log(o),document.getElementById("locationInput").value=""}}();let o=document.getElementById("location");o.textContent="Showing Weather for: "+t.address;let s=document.getElementById("switch-units");"us"==t.units?(o.innerText+="(°F)",s.innerText="Switch to °C"):(o.innerText+="(°C)",s.innerText="Switch to °F");let a=document.getElementsByClassName("card");for(let e=0;e<t.days.length;e++)a[e].getElementsByClassName("temp")[0].innerText="High: "+Math.round(t.days[e].high)+"° Low: "+Math.round(t.days[e].low)+"°"}window.onload=function(){document.getElementById("search-for-weather").addEventListener("click",o),document.getElementById("switch-units").addEventListener("click",s),o()}})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVEsR0FDMUM5QixFQUNQLE1BQ0FxQyxNQUFNLGdDQUNOakMsUUFBUUMsSUFBSUksR0FDWmlCLFNBQVNDLGVBQWUsaUJBQWlCRyxNQUFRLElDMEN4QnVDLEdBRTNCLElBQUk1QixFQUFjZixTQUFTQyxlQUFlLFlBQzFDYyxFQUFZQyxZQUFjLHdCQUEwQjdDLEVBQWNFLFFBRWxFLElBQUk0QyxFQUFVakIsU0FBU0MsZUFBZSxnQkFDWCxNQUF2QjlCLEVBQWNDLE9BQ2hCMkMsRUFBWUcsV0FBYSxPQUN6QkQsRUFBUUMsVUFBWSxpQkFFcEJILEVBQVlHLFdBQWEsT0FDekJELEVBQVFDLFVBQVksZ0JBR3RCLElBQUkwQixFQUFRNUMsU0FBU3dDLHVCQUF1QixRQUM1QyxJQUFLLElBQUkzRCxFQUFJLEVBQUdBLEVBQUlWLEVBQWNHLEtBQUsrQixPQUFReEIsSUFDOUIrRCxFQUFNL0QsR0FBRzJELHVCQUF1QixRQUN0QyxHQUFHdEIsVUFDVixTQUNBZSxLQUFLQyxNQUFNL0QsRUFBY0csS0FBS08sR0FBR08sTUFEakMsVUFJQTZDLEtBQUtDLE1BQU0vRCxFQUFjRyxLQUFLTyxHQUFHSyxLQUNqQyxJQWdDTjJELE9BQU9DLE9BQVMsV0EzQmQ5QyxTQUNHQyxlQUFlLHNCQUNmOEMsaUJBQWlCLFFBQVNqRCxHQUU3QkUsU0FBU0MsZUFBZSxnQkFBZ0I4QyxpQkFBaUIsUUFBU0wsR0F5QmxFNUMsTSIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4td2VhdGhlci8uL3NyYy9tb2R1bGVzL3dlYXRoZXIuanMiLCJ3ZWJwYWNrOi8vb2Rpbi13ZWF0aGVyLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEFQSUtleSA9IGNvbmZpZy5BUElfS0VZO1xyXG5cclxuY29uc3Qgd2VhdGhlck9iamVjdCA9ICgoKSA9PiB7XHJcbiAgbGV0IHVuaXRzID0gXCJ1c1wiO1xyXG4gIGxldCBhZGRyZXNzID0gXCJcIjtcclxuICBsZXQgZGF5cyA9IFtdO1xyXG4gIHJldHVybiB7XHJcbiAgICB1bml0cyxcclxuICAgIGFkZHJlc3MsXHJcbiAgICBkYXlzLFxyXG4gIH07XHJcbn0pKCk7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRXZWF0aGVyKHNlYXJjaCwgdW5pdHMpIHtcclxuICBjb25zb2xlLmxvZyhzZWFyY2gpO1xyXG4gIGNvbnNvbGUubG9nKHVuaXRzKTtcclxuICB0cnkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChcclxuICAgICAgYGh0dHBzOi8vd2VhdGhlci52aXN1YWxjcm9zc2luZy5jb20vVmlzdWFsQ3Jvc3NpbmdXZWJTZXJ2aWNlcy9yZXN0L3NlcnZpY2VzL3RpbWVsaW5lLyR7c2VhcmNofS9uZXh0N2RheXM/dW5pdEdyb3VwPSR7dW5pdHN9JmluY2x1ZGU9ZGF5cyxob3VycyZrZXk9JHtBUElLZXl9JmNvbnRlbnRUeXBlPWpzb25gLFxyXG4gICAgICB7IG1vZGU6IFwiY29yc1wiIH1cclxuICAgICk7XHJcbiAgICBjb25zdCB3ZWF0aGVyID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgbGV0IGRheXMgPSBhd2FpdCBxdWVyeUpTT04od2VhdGhlcik7XHJcbiAgICB3ZWF0aGVyT2JqZWN0LmFkZHJlc3MgPSB3ZWF0aGVyLnJlc29sdmVkQWRkcmVzcztcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9jYXRpb25JbnB1dFwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICByZXR1cm4gZGF5cztcclxuICB9IGNhdGNoIHtcclxuICAgIGFsZXJ0KFwiTm8gTG9jYXRpb24gRm91bmQsIFRyeSBBZ2FpblwiKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9jYXRpb25JbnB1dFwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgfVxyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBnZXRVbml0U3dpdGNoV2VhdGhlcigpIHtcclxuICBsZXQgbG9jYXRpb24gPSB3ZWF0aGVyT2JqZWN0LmFkZHJlc3M7XHJcbiAgY29uc29sZS5sb2cobG9jYXRpb24pO1xyXG4gIGxldCB1bml0cyA9IHdlYXRoZXJPYmplY3QudW5pdHM7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXHJcbiAgICAgIGBodHRwczovL3dlYXRoZXIudmlzdWFsY3Jvc3NpbmcuY29tL1Zpc3VhbENyb3NzaW5nV2ViU2VydmljZXMvcmVzdC9zZXJ2aWNlcy90aW1lbGluZS8ke2xvY2F0aW9ufS9uZXh0N2RheXM/dW5pdEdyb3VwPSR7dW5pdHN9JmluY2x1ZGU9ZGF5cyxob3VycyZrZXk9JHtBUElLZXl9JmNvbnRlbnRUeXBlPWpzb25gLFxyXG4gICAgICB7IG1vZGU6IFwiY29yc1wiIH1cclxuICAgICk7XHJcbiAgICBjb25zdCB3ZWF0aGVyID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgbGV0IGRheXMgPSBhd2FpdCBxdWVyeUpTT04od2VhdGhlcik7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvY2F0aW9uSW5wdXRcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgcmV0dXJuIGRheXM7XHJcbiAgfSBjYXRjaCB7XHJcbiAgICBhbGVydChcIk5vIExvY2F0aW9uIEZvdW5kLCBUcnkgQWdhaW5cIik7XHJcbiAgICBjb25zb2xlLmxvZyhsb2NhdGlvbik7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImxvY2F0aW9uSW5wdXRcIikudmFsdWUgPSBcIlwiO1xyXG4gIH1cclxufVxyXG5cclxuYXN5bmMgZnVuY3Rpb24gcXVlcnlKU09OKHdlYXRoZXIpIHtcclxuICBjb25zb2xlLmxvZyh3ZWF0aGVyKTtcclxuICBsZXQgZGF5c09mSW50ZXJlc3QgPSBbXTtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgbGV0IGRheSA9IHtcclxuICAgICAgbG9jYXRpb246IHdlYXRoZXIuYWRkcmVzcyxcclxuICAgICAgZGF0ZTogd2VhdGhlci5kYXlzW2ldLmRhdGV0aW1lLFxyXG4gICAgICBsb3c6IHdlYXRoZXIuZGF5c1tpXS50ZW1wbWluLFxyXG4gICAgICBoaWdoOiB3ZWF0aGVyLmRheXNbaV0udGVtcG1heCxcclxuICAgICAgaG91cmx5OiB3ZWF0aGVyLmRheXNbaV0uaG91cnMsXHJcbiAgICAgIGNvbmRpdGlvbjogd2VhdGhlci5kYXlzW2ldLmNvbmRpdGlvbnMsXHJcbiAgICAgIHByZWNpcDogd2VhdGhlci5kYXlzW2ldLnByZWNpcHByb2IsXHJcbiAgICAgIGljb246IHdlYXRoZXIuZGF5c1tpXS5pY29uLFxyXG4gICAgfTtcclxuICAgIGRheXNPZkludGVyZXN0LnB1c2goZGF5KTtcclxuICB9XHJcbiAgcmV0dXJuIGRheXNPZkludGVyZXN0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTZWFyY2goKSB7XHJcbiAgbGV0IHNlYXJjaCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9jYXRpb25JbnB1dFwiKS52YWx1ZTtcclxuICByZXR1cm4gc2VhcmNoO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzd2l0Y2hVbml0cygpIHtcclxuICBpZiAod2VhdGhlck9iamVjdC51bml0cyA9PSBcInVzXCIpIHtcclxuICAgIHdlYXRoZXJPYmplY3QudW5pdHMgPSBcIm1ldHJpY1wiO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB3ZWF0aGVyT2JqZWN0LnVuaXRzID0gXCJ1c1wiO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IHtcclxuICB3ZWF0aGVyT2JqZWN0LFxyXG4gIGdldFdlYXRoZXIsXHJcbiAgZ2V0VW5pdFN3aXRjaFdlYXRoZXIsXHJcbiAgc3dpdGNoVW5pdHMsXHJcbiAgZ2V0U2VhcmNoLFxyXG59O1xyXG4iLCJpbXBvcnQge1xyXG4gIHdlYXRoZXJPYmplY3QsXHJcbiAgZ2V0V2VhdGhlcixcclxuICBnZXRVbml0U3dpdGNoV2VhdGhlcixcclxuICBzd2l0Y2hVbml0cyxcclxuICBnZXRTZWFyY2gsXHJcbn0gZnJvbSBcIi4vbW9kdWxlcy93ZWF0aGVyLmpzXCI7XHJcblxyXG5hc3luYyBmdW5jdGlvbiByZW5kZXJEYXlzKCkge1xyXG4gIGxldCBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNhcmQtaG9sZGVyXCIpO1xyXG4gIGxldCBzZWFyY2ggPSBcIlwiO1xyXG4gIGxldCB1bml0cyA9IFwiXCI7XHJcbiAgaWYgKGRpdi5oYXNDaGlsZE5vZGVzKCkpIHtcclxuICAgIHNlYXJjaCA9IGdldFNlYXJjaCgpO1xyXG4gICAgdW5pdHMgPSB3ZWF0aGVyT2JqZWN0LnVuaXRzO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBzZWFyY2ggPSBcImRhbGxhc1wiO1xyXG4gICAgdW5pdHMgPSBcInVzXCI7XHJcbiAgfVxyXG4gIGlmICh3ZWF0aGVyT2JqZWN0LmRheXMubGVuZ3RoID4gMCkge1xyXG4gICAgd2VhdGhlck9iamVjdC5kYXlzID0gW107XHJcbiAgfVxyXG5cclxuICB3ZWF0aGVyT2JqZWN0LmRheXMgPSBhd2FpdCBnZXRXZWF0aGVyKHNlYXJjaCwgdW5pdHMpO1xyXG5cclxuICB3aGlsZSAoZGl2LmZpcnN0Q2hpbGQpIHtcclxuICAgIGRpdi5yZW1vdmVDaGlsZChkaXYuZmlyc3RDaGlsZCk7XHJcbiAgfVxyXG4gIGxldCBsb2NhdGlvbkRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9jYXRpb25cIik7XHJcbiAgbG9jYXRpb25EaXYudGV4dENvbnRlbnQgPSBcIlNob3dpbmcgV2VhdGhlciBmb3I6IFwiICsgd2VhdGhlck9iamVjdC5hZGRyZXNzO1xyXG4gIGxldCB1bml0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzd2l0Y2gtdW5pdHNcIik7XHJcbiAgaWYgKHdlYXRoZXJPYmplY3QudW5pdHMgPT0gXCJ1c1wiKSB7XHJcbiAgICBsb2NhdGlvbkRpdi5pbm5lclRleHQgKz0gXCIoXFx1MDBCMEYpXCI7XHJcbiAgICB1bml0QnRuLmlubmVyVGV4dCA9IGBTd2l0Y2ggdG8gXFx1MDBCMENgO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBsb2NhdGlvbkRpdi5pbm5lclRleHQgKz0gXCIoXFx1MDBCMEMpXCI7XHJcbiAgICB1bml0QnRuLmlubmVyVGV4dCA9IGBTd2l0Y2ggdG8gXFx1MDBCMEZgO1xyXG4gIH1cclxuICB3ZWF0aGVyT2JqZWN0LmRheXMuZm9yRWFjaCgoZGF5KSA9PiB7XHJcbiAgICBsZXQgaW5uZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgaW5uZXJEaXYuY2xhc3NOYW1lID0gXCJjYXJkXCI7XHJcblxyXG4gICAgbGV0IGRhdGUgPSBwYXJzZURhdGUoZGF5LmRhdGUpO1xyXG4gICAgbGV0IGRhdGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgZGF0ZURpdi5jbGFzc05hbWUgPSBcImRhdGVcIjtcclxuICAgIGRhdGVEaXYuaW5uZXJUZXh0ID0gZGF0ZTtcclxuICAgIGlubmVyRGl2LmFwcGVuZENoaWxkKGRhdGVEaXYpO1xyXG5cclxuICAgIGxldCBpY29uSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGljb25Ib2xkZXIuY2xhc3NOYW1lID0gXCJpY29uXCI7XHJcbiAgICBsZXQgaWNvbkRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XHJcbiAgICBpbm5lckRpdi5hcHBlbmRDaGlsZChpY29uSG9sZGVyKTtcclxuICAgIGljb25Ib2xkZXIuYXBwZW5kQ2hpbGQoaWNvbkRpdik7XHJcbiAgICBpY29uRGl2LnNyYyA9IFwiLi4vaWNvbnMvXCIgKyBkYXkuaWNvbiArIFwiLnN2Z1wiO1xyXG5cclxuICAgIGxldCB0ZW1wRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHRlbXBEaXYuY2xhc3NOYW1lID0gXCJ0ZW1wXCI7XHJcbiAgICB0ZW1wRGl2LnRleHRDb250ZW50ID1cclxuICAgICAgXCJIaWdoOiBcIiArXHJcbiAgICAgIE1hdGgucm91bmQoZGF5LmhpZ2gpICtcclxuICAgICAgYFxcdTAwQjBgICtcclxuICAgICAgXCIgTG93OiBcIiArXHJcbiAgICAgIE1hdGgucm91bmQoZGF5LmxvdykgK1xyXG4gICAgICBgXFx1MDBCMGA7XHJcbiAgICBpbm5lckRpdi5hcHBlbmRDaGlsZCh0ZW1wRGl2KTtcclxuXHJcbiAgICBsZXQgY29uZERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICBjb25kRGl2LmlubmVyVGV4dCA9IGRheS5jb25kaXRpb247XHJcbiAgICBjb25kRGl2LmNsYXNzTmFtZSA9IFwiY29uZGl0aW9uXCI7XHJcbiAgICBpbm5lckRpdi5hcHBlbmRDaGlsZChjb25kRGl2KTtcclxuXHJcbiAgICBsZXQgcHJlY2lwRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIHByZWNpcERpdi5pbm5lclRleHQgPSBcIlByZWNpcGl0YXRpb246IFwiICsgTWF0aC5yb3VuZChkYXkucHJlY2lwIC8gMTApICsgXCIlXCI7XHJcbiAgICBwcmVjaXBEaXYuY2xhc3NOYW1lID0gXCJwcmVjaXBcIjtcclxuICAgIGlubmVyRGl2LmFwcGVuZENoaWxkKHByZWNpcERpdik7XHJcbiAgICBkaXYuYXBwZW5kQ2hpbGQoaW5uZXJEaXYpO1xyXG4gIH0pO1xyXG5cclxuICBkb2N1bWVudFxyXG4gICAgLmdldEVsZW1lbnRCeUlkKFwiY29udGFpbmVyXCIpXHJcbiAgICAuY2xhc3NMaXN0LmFkZCh3ZWF0aGVyT2JqZWN0LmRheXNbMF0uaWNvbik7XHJcbiAgbGV0IG5vZGVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNhcmRcIik7XHJcbiAgY29uc29sZS5sb2cobm9kZXMpO1xyXG4gIGxldCB0ZCA9IG5vZGVzWzBdLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJ0ZW1wXCIpO1xyXG4gIGNvbnNvbGUubG9nKHRkWzBdLmlubmVyVGV4dCk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZURheXMoKSB7XHJcbiAgc3dpdGNoVW5pdHMoKTtcclxuICBjb25zb2xlLmxvZyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN3aXRjaC11bml0c1wiKS5pbm5lclRleHQpO1xyXG4gIHdlYXRoZXJPYmplY3QuZGF5cyA9IGF3YWl0IGdldFVuaXRTd2l0Y2hXZWF0aGVyKCk7XHJcblxyXG4gIGxldCBsb2NhdGlvbkRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibG9jYXRpb25cIik7XHJcbiAgbG9jYXRpb25EaXYudGV4dENvbnRlbnQgPSBcIlNob3dpbmcgV2VhdGhlciBmb3I6IFwiICsgd2VhdGhlck9iamVjdC5hZGRyZXNzO1xyXG5cclxuICBsZXQgdW5pdEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3dpdGNoLXVuaXRzXCIpO1xyXG4gIGlmICh3ZWF0aGVyT2JqZWN0LnVuaXRzID09IFwidXNcIikge1xyXG4gICAgbG9jYXRpb25EaXYuaW5uZXJUZXh0ICs9IFwiKFxcdTAwQjBGKVwiO1xyXG4gICAgdW5pdEJ0bi5pbm5lclRleHQgPSBgU3dpdGNoIHRvIFxcdTAwQjBDYDtcclxuICB9IGVsc2Uge1xyXG4gICAgbG9jYXRpb25EaXYuaW5uZXJUZXh0ICs9IFwiKFxcdTAwQjBDKVwiO1xyXG4gICAgdW5pdEJ0bi5pbm5lclRleHQgPSBgU3dpdGNoIHRvIFxcdTAwQjBGYDtcclxuICB9XHJcblxyXG4gIGxldCBjYXJkcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjYXJkXCIpO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgd2VhdGhlck9iamVjdC5kYXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBsZXQgdGVtcERpdnMgPSBjYXJkc1tpXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwidGVtcFwiKTtcclxuICAgIHRlbXBEaXZzWzBdLmlubmVyVGV4dCA9XHJcbiAgICAgIFwiSGlnaDogXCIgK1xyXG4gICAgICBNYXRoLnJvdW5kKHdlYXRoZXJPYmplY3QuZGF5c1tpXS5oaWdoKSArXHJcbiAgICAgIGBcXHUwMEIwYCArXHJcbiAgICAgIFwiIExvdzogXCIgK1xyXG4gICAgICBNYXRoLnJvdW5kKHdlYXRoZXJPYmplY3QuZGF5c1tpXS5sb3cpICtcclxuICAgICAgYFxcdTAwQjBgO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcigpIHtcclxuICBkb2N1bWVudFxyXG4gICAgLmdldEVsZW1lbnRCeUlkKFwic2VhcmNoLWZvci13ZWF0aGVyXCIpXHJcbiAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlbmRlckRheXMpO1xyXG5cclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN3aXRjaC11bml0c1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdXBkYXRlRGF5cyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlRGF0ZShkYXRlKSB7XHJcbiAgbGV0IG1vbnRocyA9IFtcclxuICAgIFwiSmFudWFyeVwiLFxyXG4gICAgXCJGZWJydWFyeVwiLFxyXG4gICAgXCJNYXJjaFwiLFxyXG4gICAgXCJBcHJpbFwiLFxyXG4gICAgXCJNYXlcIixcclxuICAgIFwiSnVuZVwiLFxyXG4gICAgXCJKdWx5XCIsXHJcbiAgICBcIkF1Z3VzdFwiLFxyXG4gICAgXCJTZXB0ZW1iZXJcIixcclxuICAgIFwiT2N0b2JlclwiLFxyXG4gICAgXCJOb3ZlbWJlclwiLFxyXG4gICAgXCJEZWNlbWJlclwiLFxyXG4gIF07XHJcbiAgbGV0IHNwbGl0RGF0ZSA9IGRhdGUuc3BsaXQoXCItXCIpO1xyXG4gIGxldCBtb250aCA9IG1vbnRoc1tzcGxpdERhdGVbMV0gLSAxXTtcclxuXHJcbiAgcmV0dXJuIG1vbnRoICsgXCIgXCIgKyBwYXJzZUludChzcGxpdERhdGVbMl0sIDEwKTtcclxufVxyXG53aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gIGFkZEV2ZW50TGlzdGVuZXIoKTtcclxuICByZW5kZXJEYXlzKCk7XHJcbn07XHJcbiJdLCJuYW1lcyI6WyJBUElLZXkiLCJjb25maWciLCJBUElfS0VZIiwid2VhdGhlck9iamVjdCIsInVuaXRzIiwiYWRkcmVzcyIsImRheXMiLCJhc3luYyIsInF1ZXJ5SlNPTiIsIndlYXRoZXIiLCJjb25zb2xlIiwibG9nIiwiZGF5c09mSW50ZXJlc3QiLCJpIiwiZGF5IiwibG9jYXRpb24iLCJkYXRlIiwiZGF0ZXRpbWUiLCJsb3ciLCJ0ZW1wbWluIiwiaGlnaCIsInRlbXBtYXgiLCJob3VybHkiLCJob3VycyIsImNvbmRpdGlvbiIsImNvbmRpdGlvbnMiLCJwcmVjaXAiLCJwcmVjaXBwcm9iIiwiaWNvbiIsInB1c2giLCJyZW5kZXJEYXlzIiwiZGl2IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNlYXJjaCIsImhhc0NoaWxkTm9kZXMiLCJ2YWx1ZSIsImxlbmd0aCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtb2RlIiwianNvbiIsInJlc29sdmVkQWRkcmVzcyIsImFsZXJ0IiwiZ2V0V2VhdGhlciIsImZpcnN0Q2hpbGQiLCJyZW1vdmVDaGlsZCIsImxvY2F0aW9uRGl2IiwidGV4dENvbnRlbnQiLCJ1bml0QnRuIiwiaW5uZXJUZXh0IiwiZm9yRWFjaCIsImlubmVyRGl2IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInNwbGl0RGF0ZSIsInNwbGl0IiwicGFyc2VJbnQiLCJwYXJzZURhdGUiLCJkYXRlRGl2IiwiYXBwZW5kQ2hpbGQiLCJpY29uSG9sZGVyIiwiaWNvbkRpdiIsInNyYyIsInRlbXBEaXYiLCJNYXRoIiwicm91bmQiLCJjb25kRGl2IiwicHJlY2lwRGl2IiwiY2xhc3NMaXN0IiwiYWRkIiwibm9kZXMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwidGQiLCJ1cGRhdGVEYXlzIiwiZ2V0VW5pdFN3aXRjaFdlYXRoZXIiLCJjYXJkcyIsIndpbmRvdyIsIm9ubG9hZCIsImFkZEV2ZW50TGlzdGVuZXIiXSwic291cmNlUm9vdCI6IiJ9